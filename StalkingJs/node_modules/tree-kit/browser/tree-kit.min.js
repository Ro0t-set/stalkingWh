(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.treeKit=e()}})(function(){var e,t,r;return function e(t,r,n){function i(o,s){if(!r[o]){if(!t[o]){var u=typeof require=="function"&&require;if(!s&&u)return u(o,!0);if(f)return f(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var a=r[o]={exports:{}};t[o][0].call(a.exports,function(e){var r=t[o][1][e];return i(r?r:e)},a,a.exports,e,t,r,n)}return r[o].exports}var f=typeof require=="function"&&require;for(var o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,r){"use strict";var n={};t.exports=n;n.extend=e("./extend.js");n.clone=e("./clone.js");n.path=e("./path.js")},{"./clone.js":2,"./extend.js":3,"./path.js":4}],2:[function(e,t,r){"use strict";t.exports=function e(t,r){var n,i,f,o,s,u,c=[{source:t,target:Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t))}],a=c[0].target,p=[t],d=[a];while(o=c.shift()){f=Object.getOwnPropertyNames(o.source);for(n=0;n<f.length;n++){i=Object.getOwnPropertyDescriptor(o.source,f[n]);if(!i.value||typeof i.value!=="object"){Object.defineProperty(o.target,f[n],i);continue}s=i.value;i.value=Array.isArray(s)?[]:Object.create(Object.getPrototypeOf(s));if(r){u=p.indexOf(s);if(u!==-1){i.value=d[u];Object.defineProperty(o.target,f[n],i);continue}p.push(s);d.push(i.value)}Object.defineProperty(o.target,f[n],i);c.push({source:s,target:i.value})}}return a}},{}],3:[function(e,t,r){"use strict";function n(e,t){var r,n,f=false,o=arguments.length;if(o<3){return t}var s=Array.prototype.slice.call(arguments,2);o=s.length;if(!e||typeof e!=="object"){e={}}var u={depth:0,prefix:""};if(!e.maxDepth&&e.deep&&!e.circular){e.maxDepth=100}if(e.deepFunc){e.deep=true}if(e.deepFilter&&typeof e.deepFilter==="object"){if(e.deepFilter.whitelist&&(!Array.isArray(e.deepFilter.whitelist)||!e.deepFilter.whitelist.length)){delete e.deepFilter.whitelist}if(e.deepFilter.blacklist&&(!Array.isArray(e.deepFilter.blacklist)||!e.deepFilter.blacklist.length)){delete e.deepFilter.blacklist}if(!e.deepFilter.whitelist&&!e.deepFilter.blacklist){delete e.deepFilter}}if(e.flat){e.deep=true;e.proto=false;e.inherit=false;e.unflat=false;if(typeof e.flat!=="string"){e.flat="."}}if(e.unflat){e.deep=false;e.proto=false;e.inherit=false;e.flat=false;if(typeof e.unflat!=="string"){e.unflat="."}}if(e.inherit){e.own=true;e.proto=false}else if(e.proto){e.own=true}if(!t||typeof t!=="object"&&typeof t!=="function"){f=true}if(!e.skipRoot&&(e.inherit||e.proto)){for(r=o-1;r>=0;r--){n=s[r];if(n&&(typeof n==="object"||typeof n==="function")){if(e.inherit){if(f){t=Object.create(n)}else{Object.setPrototypeOf(t,n)}}else if(e.proto){if(f){t=Object.create(Object.getPrototypeOf(n))}else{Object.setPrototypeOf(t,Object.getPrototypeOf(n))}}break}}}else if(f){t={}}u.references={sources:[],targets:[]};for(r=0;r<o;r++){n=s[r];if(!n||typeof n!=="object"&&typeof n!=="function"){continue}i(u,e,t,n)}return t}t.exports=n;function i(e,t,r,n){var f,o,s,u,c,a,p,d,l,b,y,h=-1;if(t.maxDepth&&e.depth>t.maxDepth){throw new Error("[tree] extend(): max depth reached("+t.maxDepth+")")}if(t.circular){e.references.sources.push(n);e.references.targets.push(r)}if(t.own){if(t.nonEnum){s=Object.getOwnPropertyNames(n)}else{s=Object.keys(n)}}else{s=n}for(u in s){if(t.own){u=s[u]}if(t.descriptor){d=Object.getOwnPropertyDescriptor(n,u);c=d.value}else{c=n[u]}b=r;l=e.prefix+u;if(t.nofunc&&typeof c==="function"){continue}if(t.unflat&&e.depth===0){y=u.split(t.unflat);o=y.length-1;if(o){for(f=0;f<o;f++){if(!b[y[f]]||typeof b[y[f]]!=="object"&&typeof b[y[f]]!=="function"){b[y[f]]={}}b=b[y[f]]}l=e.prefix+y[o]}}if(t.deep&&c&&(typeof c==="object"||t.deepFunc&&typeof c==="function")&&(!t.descriptor||!d.get)&&((a=Object.getPrototypeOf(c))||true)&&(!t.deepFilter||(!t.deepFilter.whitelist||t.deepFilter.whitelist.indexOf(a)!==-1)&&(!t.deepFilter.blacklist||t.deepFilter.blacklist.indexOf(a)===-1))){if(t.circular){h=e.references.sources.indexOf(c)}if(t.flat){if(h>=0){continue}i({depth:e.depth+1,prefix:e.prefix+u+t.flat,references:e.references},t,b,c)}else{if(h>=0){if(t.descriptor){Object.defineProperty(b,l,{value:e.references.targets[h],enumerable:d.enumerable,writable:d.writable,configurable:d.configurable})}else{b[l]=e.references.targets[h]}continue}if(!b[l]||!b.hasOwnProperty(l)||typeof b[l]!=="object"&&typeof b[l]!=="function"){if(Array.isArray(c)){p=[]}else if(t.proto){p=Object.create(a)}else if(t.inherit){p=Object.create(c)}else{p={}}if(t.descriptor){Object.defineProperty(b,l,{value:p,enumerable:d.enumerable,writable:d.writable,configurable:d.configurable})}else{b[l]=p}}else if(t.proto&&Object.getPrototypeOf(b[l])!==a){Object.setPrototypeOf(b[l],a)}else if(t.inherit&&Object.getPrototypeOf(b[l])!==c){Object.setPrototypeOf(b[l],c)}if(t.circular){e.references.sources.push(c);e.references.targets.push(b[l])}i({depth:e.depth+1,prefix:"",references:e.references},t,b[l],c)}}else if(t.preserve&&b[l]!==undefined){continue}else if(!t.inherit){if(t.descriptor){Object.defineProperty(b,l,d)}else{b[l]=c}}if(t.move){delete n[u]}}}},{}],4:[function(e,t,r){"use strict";var n={};t.exports=n;n.op=function e(t,r,n,i){var f,o,s,u,c,a=false,p=false,d,l=true;if(!r||typeof r!=="object"&&typeof r!=="function"){return}if(typeof n==="string"){if(n){o=n.match(/([.#\[\]]|[^.#\[\]]+)/g)}else{o=[""]}if(o[0]==="."){o.unshift("")}if(o[o.length-1]==="."){o.push("")}}else if(Array.isArray(n)){o=n;p=true}else{throw new TypeError("[tree.path] ."+t+"(): the path argument should be a string or an array")}switch(t){case"get":case"delete":d=false;break;case"set":case"define":case"inc":case"dec":case"append":case"prepend":case"concat":case"insert":case"autoPush":d=true;break;default:throw new TypeError("[tree.path] .op(): wrong type of operation '"+t+"'")}u=r;s=o.length-1;for(f=0;f<=s;f++){if(p){if(c===undefined){c=o[f];continue}if(!u[c]||typeof u[c]!=="object"&&typeof u[c]!=="function"){if(!d){return undefined}u[c]={}}u=u[c];c=o[f];continue}else if(o[f]==="."){a=false;if(c===undefined){if(!l){l=true;continue}c=""}if(!u[c]||typeof u[c]!=="object"&&typeof u[c]!=="function"){if(!d){return undefined}u[c]={}}u=u[c];l=true;continue}else if(o[f]==="#"||o[f]==="["){a=true;l=false;if(c===undefined){if(!Array.isArray(u)){return undefined}continue}if(!u[c]||!Array.isArray(u[c])){if(!d){return undefined}u[c]=[]}u=u[c];continue}else if(o[f]==="]"){l=false;continue}l=false;if(!a){c=o[f];continue}switch(o[f]){case"length":c=o[f];break;case"first":c=0;break;case"last":c=u.length-1;if(c<0){c=0}break;case"next":if(!d){return undefined}c=u.length;break;case"insert":if(!d){return undefined}u.unshift(undefined);c=0;break;default:c=parseInt(o[f],10)}}switch(t){case"get":return u[c];case"delete":if(a&&typeof c==="number"){u.splice(c,1)}else{delete u[c]}return;case"set":u[c]=i;return u[c];case"define":if(!(c in u)){u[c]=i}return u[c];case"inc":if(typeof u[c]==="number"){u[c]++}else if(!u[c]||typeof u[c]!=="object"){u[c]=1}return u[c];case"dec":if(typeof u[c]==="number"){u[c]--}else if(!u[c]||typeof u[c]!=="object"){u[c]=-1}return u[c];case"append":if(!u[c]){u[c]=[i]}else if(Array.isArray(u[c])){u[c].push(i)}return u[c];case"prepend":if(!u[c]){u[c]=[i]}else if(Array.isArray(u[c])){u[c].unshift(i)}return u[c];case"concat":if(!u[c]){u[c]=i}else if(Array.isArray(u[c])&&Array.isArray(i)){u[c]=u[c].concat(i)}return u[c];case"insert":if(!u[c]){u[c]=i}else if(Array.isArray(u[c])&&Array.isArray(i)){u[c]=i.concat(u[c])}return u[c];case"autoPush":if(u[c]===undefined){u[c]=i}else if(Array.isArray(u[c])){u[c].push(i)}else{u[c]=[u[c],i]}return u[c]}};n.get=n.op.bind(undefined,"get");n.delete=n.op.bind(undefined,"delete");n.set=n.op.bind(undefined,"set");n.define=n.op.bind(undefined,"define");n.inc=n.op.bind(undefined,"inc");n.dec=n.op.bind(undefined,"dec");n.append=n.op.bind(undefined,"append");n.prepend=n.op.bind(undefined,"prepend");n.concat=n.op.bind(undefined,"concat");n.insert=n.op.bind(undefined,"insert");n.autoPush=n.op.bind(undefined,"autoPush");n.prototype={get:function(e){return n.get(this,e)},delete:function(e){return n.delete(this,e)},set:function(e,t){return n.set(this,e,t)},define:function(e,t){return n.define(this,e,t)},inc:function(e,t){return n.inc(this,e,t)},dec:function(e,t){return n.dec(this,e,t)},append:function(e,t){return n.append(this,e,t)},prepend:function(e,t){return n.prepend(this,e,t)},concat:function(e,t){return n.concat(this,e,t)},insert:function(e,t){return n.insert(this,e,t)},autoPush:function(e,t){return n.autoPush(this,e,t)}};n.upgrade=function e(t){Object.defineProperties(t,{get:{value:n.op.bind(undefined,"get",t)},delete:{value:n.op.bind(undefined,"delete",t)},set:{value:n.op.bind(undefined,"set",t)},define:{value:n.op.bind(undefined,"define",t)},inc:{value:n.op.bind(undefined,"inc",t)},dec:{value:n.op.bind(undefined,"dec",t)},append:{value:n.op.bind(undefined,"append",t)},prepend:{value:n.op.bind(undefined,"prepend",t)},concat:{value:n.op.bind(undefined,"concat",t)},insert:{value:n.op.bind(undefined,"insert",t)},autoPush:{value:n.op.bind(undefined,"autoPush",t)}})}},{}]},{},[1])(1)});